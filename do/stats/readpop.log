. clear all

. set more off


  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   13.1   Copyright 1985-2013 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

                                      979-696-4601 (fax)

15-student 2-core Stata lab perpetual license:
       Serial number:  501306214154
         Licensed to:  Carrefour technologique
                       ESG UQAM

Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do readpop reference 16 

. * code to read a scenario from a dictionary file
. * code to read a scenario from a dictionary file
. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03


Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do readpop reference 32 

. * code to read a scenario from a dictionary file
. * code to read a scenario from a dictionary file
. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03


Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do readpop reference 31 

. * code to read a scenario from a dictionary file
. * code to read a scenario from a dictionary file
. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03


Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do readpop reference 29 

. * code to read a scenario from a dictionary file
. * code to read a scenario from a dictionary file
. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. clear all

ount = 0.03

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. clear all

. clear all


/share/gg191312/compas

. set more off

. cd ~/compas
/share/gg191312/compas

off

. global rep = "`2'"

. global scenario = "`1'"

. global rep = "`2'"

. cd ~/compas
/share/gg191312/compas

. global discount = 0.03

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. clear all

. set more off

hare/gg191312/compas

. global scenario = "`1'"

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global discount = 0.03

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. clear all

. set more off

. cd ~/compas
/share/gg191312/compas

. global scenario = "`1'"

. global rep = "`2'"

. global discount = 0.03

. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

a

. 
. * add labels to variables
. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var year "year in simulation" 

. label var hc_hui "Health utility index"

. label var id "identifier of simulated case"

. label var cost_nights "annual cost of nights in hospital"

. label var age "age in years"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var imm "immigration status (immigrant=1)"

s received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var income "income bracket (5)"

. label var cost_nhome "annual cost of nursing home stay"

. label var ltc "Long term care (3)"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. use output/$scenario/simpop-$rep.dta

in hospital"

. 
abel var hc_specialist "number of visits to specialist"

. * add labels to variables
. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var year "year in simulation" 

. label var hc_hui "Health utility index"

. label var id "identifier of simulated case"

. label var cost_nights "annual cost of nights in hospital"

. label var age "age in years"

. label var cost_specialist "annual cost of specialist consultations"

. label var byear "birth year"

. label var cost_generalist "annual cost of generalist consultations"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

f formal home care"

. label var imm "immigration status (immigrant=1)"

. label var hours_homecare_i "annual informal home care hours received"

. label var income "income bracket (5)"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var ltc "Long term care (3)"

. label var cost_drugs "annual cost of drugs"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var cost_nhome "annual cost of nursing home stay"

. label var hibpe "case has hypertension"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. 
. * add labels to variables
. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var year "year in simulation" 

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var id "identifier of simulated case"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var byear "birth year"

ation"

. 
. * add lifetime variables to data for each ind
. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. use output/$scenario/simpop-$rep.dta

. label var cost_generalist "annual cost of generalist consultations"

. 
. * add labels to variables
. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. 
. * add labels to variables
. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var year "year in simulation" 

. label var hours_homecare_i "annual informal home care hours received"

. label var id "identifier of simulated case"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var age "age in years"

. label var cost_drugs "annual cost of drugs"

. label var byear "birth year"

. label var cost_nhome "annual cost of nursing home stay"

. label var educ "education level (4)"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
f simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var year "year in simulation" 

. label var income "income bracket (5)"

. label var id "identifier of simulated case"

. label var ltc "Long term care (3)"

. label var byear "birth year"

. label var province "region of country (5)"

. label var educ "education level (4)"

. label var diabe "case has diabetes"

. label var sex "sex of case (female=1)"

. label var hibpe "case has hypertension"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

e"

. label var stroke "case has stroke"

. label var province "region of country (5)"

. label var cancre "case has cancer"

. label var diabe "case has diabetes"

. label var lunge "case has lung disease"

. label var hibpe "case has hypertension"

. label var mentae "case has mental illness"

. label var hearte "case has heart disease"

. label var smoke "smoking status (3)"

. label var stroke "case has stroke"

. label var bmi "bmi status (3)"

r"

. label var lunge "case has lung disease"

. label var inv "disability status"

. label var mentae "case has mental illness"

. label var alive "case is alive"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var hc_nights "number of nights in hospital"

. label var inv "disability status"

. label var hc_specialist "number of visits to specialist"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

alists"

. label var hc_specialist "number of visits to specialist"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

e"

. label var hc_drugs "whether taking medication"

 care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_drugs "annual cost of drugs"

home stay"

. label var wgt "weight in simulation"

. 
. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. use output/$scenario/simpop-$rep.dta

. 
abel var cost_generalist "annual cost of generalist consultations"

. * add labels to variables
. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var year "year in simulation" 

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"



. 
. * add labels to variables
. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var byear "birth year"

. label var hc_homecare_f "Whether receiving formal home care"

. label var educ "education level (4)"

. label var hc_homecare_i "Whether receiving informal home care"

. label var sex "sex of case (female=1)"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"



. label var hc_hui "Health utility index"

. label var ltc "Long term care (3)"

. label var cost_nights "annual cost of nights in hospital"

. label var province "region of country (5)"

. label var cost_specialist "annual cost of specialist consultations"

. label var diabe "case has diabetes"

. label var cost_generalist "annual cost of generalist consultations"

. label var hibpe "case has hypertension"

. label var cost_homecare_f "annual cost of formal home care"

. label var hearte "case has heart disease"

. label var hours_homecare_i "annual informal home care hours received"

. label var stroke "case has stroke"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cancre "case has cancer"

. label var cost_drugs "annual cost of drugs"

. label var lunge "case has lung disease"

. label var cost_nhome "annual cost of nursing home stay"

. label var mentae "case has mental illness"

. label var wgt "weight in simulation"

. label var smoke "smoking status (3)"

. * add lifetime variables to data for each ind
. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. 
. * add labels to variables
. label var year "year in simulation" 

. label var year "year in simulation" 

case"

. label var age "age in years"

. label var id "identifier of simulated case"

. label var byear "birth year"

. label var age "age in years"

. label var educ "education level (4)"

. label var byear "birth year"

. label var sex "sex of case (female=1)"

. label var educ "education level (4)"

. label var imm "immigration status (immigrant=1)"

. label var sex "sex of case (female=1)"

. label var income "income bracket (5)"

. label var imm "immigration status (immigrant=1)"

. label var ltc "Long term care (3)"

. label var income "income bracket (5)"

. label var province "region of country (5)"

. label var ltc "Long term care (3)"

. label var diabe "case has diabetes"

. label var province "region of country (5)"

. label var hibpe "case has hypertension"

. label var diabe "case has diabetes"

. label var hearte "case has heart disease"

. label var hibpe "case has hypertension"

. label var stroke "case has stroke"

. label var hearte "case has hear. label var cancre "case has cancer"

. label var stroke "case has stroke"

. label var lunge "case has lung disease"

. label var cancre "case has cancer"

. label var mentae "case has mental illness"

. label var lunge "case has lung disease"

. label var smoke "smoking status (3)"

. label var mentae "case has mental illness"

. label var bmi "bmi status (3)"

. label var smoke "smoking status (3)"

. label var inv "disability status"

. use output/$scenario/simpop-$rep. labe. 
ar inv "disability status"

. * add labels to variables
. label var hc_nights "number of nights in hospital"

. label var alive "case is alive"

. label var hc_specialist "number of visits to specialist"

. label var hc_nights "number of nights in hospital"

. label var hc_generalist "number of visits with generalists"

. label var hc_specialist "number of visits to specialist"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_homecare_i "Whether receiving informal home care"

. label var year "year in simulation" 

. label var hc_drugs "whether taking medication"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var id "identifier of simulated case"

. label var hc_hui "Health utility index"

. label var hc_drugs "whether taking medication"

. label var age "age in years"

. label var cost_nights "annual cost of nights in hospital"

. label var hc_hui "Health utility index"

. label var byear "birth year"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_nights "annual cost of nights in hospital"

. label var educ "education level (4)"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_specialist "annual cost of specialist consultations"

. label var sex "sex of case (female=1)"

. label var cost_homecare_f "annual cost of formal home care"

. label var cost_generalist "annual cost of generalist consultations"

. label var imm "immigration status (immigrant=1)"

. label var hours_homecare_i "annual informal home care hours received"

. label var cost_homecare_f "annual cost of formal home care"

. label var income "income bracket (5)"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var ltc "Long term care (3)"

nformal home care hours received"

. label var cost_drugs "annual cost of drugs"

. label var province "region of country (5)"

e hours received from spouse"

. label var cost_nhome "annual cost of nursing home stay"

. label var cost_drugs "annual cost of drugs"

. label var diabe "case has diabetes"

. label var wgt "weight in simulation"

. l. label var hibpe "case has hypertension"

 ind
 stay"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. use output/$scenario/simpop-$rep.dta

. 
. * add labels to variables
. label var year "year in simulation" 

. label var id "identifier of simulated case"

. label var age "age in years"

. label var byear "birth year"

. label var educ "education level (4)"

. label var sex "sex of case (female=1)"

. label var imm "immigration status (immigrant=1)"

. label var income "income bracket (5)"

. label var ltc "Long term care (3)"

. label var province "region of country (5)"

. label var diabe "case has diabetes"

. label var hibpe "case has hypertension"

. label var hearte "case has heart disease"

. label var stroke "case has stroke"

. label var cancre "case has cancer"

. label var lunge "case has lung disease"

. label var mentae "case has mental illness"

. label var smoke "smoking status (3)"

. label var bmi "bmi status (3)"

. label var inv "disability status"

. label var alive "case is alive"

. label var hc_nights "number of nights in hospital"

. label var hc_specialist "number of visits to specialist"

. label var hc_generalist "number of visits with generalists"

. label var hc_homecare_f "Whether receiving formal home care"

. label var hc_homecare_i "Whether receiving informal home care"

. label var hc_homecare_sp "Whether receiving home care from spouse"

. label var hc_drugs "whether taking medication"

. label var hc_hui "Health utility index"

. label var cost_nights "annual cost of nights in hospital"

. label var cost_specialist "annual cost of specialist consultations"

. label var cost_generalist "annual cost of generalist consultations"

. label var cost_homecare_f "annual cost of formal home care"

. label var hours_homecare_i "annual informal home care hours received"

. label var hours_homecare_sp "annual home care hours received from spouse"

. label var cost_drugs "annual cost of drugs"

. label var cost_nhome "annual cost of nursing home stay"

. label var wgt "weight in simulation"

. 
. * add lifetime variables to data for each ind
. sort id year

. sort id year

. by id: gen t = _n

. sort id year

. by id: gen t = _n

. by id: gen t = _n

. tsset id t
. tsset id t
. sort id year

. sort id year

. tsset id t
. by id: gen t = _n

. by id: gen t = _n

. sort id year

. sort id year

. sort id year

. sort id year

. sort id year

. sort id year

. sort id year

. by id: gen t = _n

. by id: gen t = _n

. sort id year

. by id: gen t = _n

. by id: gen t = _n

. by id: gen t = _n

. sort id year

. sort id year

. by id: gen t = _n

. tsset id t
. sort id year

. by id: gen t = _n

. sort id year

. tsset id t
. sort id year

. by id: gen t = _n

. sort id year

. sort id year

. sort id year

. sort id year

. sort id year

. by id: gen t = _n

. by id: gen t = _n

. by id: gen t = _n

. by id: gen t = _n

. tsset id t
. by id: gen t = _n

. by id: gen t = _n

. tsset id t
. by id: gen t = _n

. sort id year

. tsset id t
. by id: gen t = _n

. by id: gen t = _n

. sort id year

. by id: gen t = _n

. sort id year

. tsset id t
. tsset id t
. by id: gen t = _n

. tsset id t
. sort id year

. by id: gen t = _n

. by id: gen t = _n

. sort id year

. tsset id t
. tsset id t
. tsset id t
. tsset id t
. sort id year

. tsset id t
. tsset id t
. by id: gen t = _n

. tsset id t
. tsset id t
. sort id year

. sort id year

. sort id year

. by id: gen t = _n

. sort id year

. tsset id t
. by id: gen t = _n

. tsset id t
. sort id year

. sort id year

. by id: gen t = _n

. tsset id t
. by id: gen t = _n

. tsset id t
. by id: gen t = _n

. sort id year

. sort id year

. tsset id t
r

. by id: gen t = _n

. tsset id t
. sort id year

. sort id year

. by id: gen t = _n

. tsset id t
. by id: gen t = _n

. by id: gen t = _n

. sort id year

. tsset id t
. tsset id t
. by id: gen t = _n

. sort id year

. by id: gen t = _n

. by id: gen t = _n

. by id: gen t = _n

. tsset id t
. tsset id t
. by id: gen t = _n

. tsset id t
. tsset id t
. sort id year

. by id: gen t = _n

. tsset id t
. tsset id t
. tsset id t
. sort id year

. by id: gen t = _n

. tsset id t
. tsset id t
. tsset id t
. sort id year

. tsset id t
. by id: gen t = _n

. tsset id t
. tsset id t
. by id: gen t = _n

. tsset id t
. tsset id t
. sort id year

. sort id year

. tsset id t
. by id: gen t = _n

. sort id year

. by id: gen t = _n

       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
. tsset id t
. by id: gen t = _n

       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
. tsset id t
. tsset id t
. tsset id t
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 42
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 42
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
        time variable:  t, 1 to 41
                delta:  1 unit
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
e cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 40
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
       panel variable:  id (unbalanced)
        time variable:  t, 1 to 41
                delta:  1 unit

. foreach var of varlist diabe hibpe hearte stroke cancre lunge mentae {
  2.         * count number of periods
.         *qui egen nyrs_`var' = total(`var'), by(id)
.         
.         by id: gen temp_nyrs_`var'=sum(`var')
  3.         by id: gen nyrs_`var' = temp_nyrs_`var'[_N]-temp_nyrs_`var'[_n-1]
  4.         by id: replace nyrs_`var'=temp_nyrs_`var'[_N] if _n==1  
  5.         * adjust for gap in years
.         by id: replace nyrs_`var' = nyrs_`var'*2 - 1*`var'[_N]
  6.         * find first age onset
.         qui gen temp_age_`var' = age if `var'==1
  7.         qui egen agefirst_`var' = min(temp_age_`var'), by(id)
  8.         drop temp_age_`var' temp_nyrs_`var'
  9. }
(18563 missing values generated)
(18563 real changes made)
(103709 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238184 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178408 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61614 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104181 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102479 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237359 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178737 real changes made)
(18563 missing values generated)
(18563 real changes made)
(60571 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102499 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103612 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238300 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179834 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61625 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103710 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101174 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237656 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180786 real changes made)
(18563 missing values generated)
(18563 real changes made)
(60287 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102712 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103096 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240344 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182668 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62368 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102262 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(100257 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237649 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182826 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61213 real changes made)
(18563 missing values generated)
(18563 real changes made)
(100998 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238053 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178420 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62838 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103677 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103384 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238005 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179104 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62581 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101801 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102760 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237137 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178901 real changes made)
(18563 missing values generated)
(18563 real changes made)
(60327 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102375 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101993 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239188 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180443 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63231 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104390 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101696 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237872 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180203 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61829 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102035 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103034 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238931 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180187 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62340 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102874 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103182 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240134 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180173 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61205 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102978 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103253 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239496 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179715 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61456 real changes made)
(18563 missing values generated)
(18563 real changes made)
(100934 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103508 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238427 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180350 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62488 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101591 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104393 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238192 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180117 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62815 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102356 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102907 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237863 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182791 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63494 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103502 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104242 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238743 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179174 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63381 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101007 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102405 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240397 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181512 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61129 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101362 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102162 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237606 real changes made)
(18563 missing values generated)
(18563 real changes made)
(175893 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62028 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101373 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101366 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239413 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180242 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61527 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103064 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103506 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238538 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179235 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61608 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104236 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(105019 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237320 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179967 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61049 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102107 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102757 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238754 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181277 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62597 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101124 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104683 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239195 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178404 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63174 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102625 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102671 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238019 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178647 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61557 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103237 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103856 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237858 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182205 real changes made)
(18563 missing values generated)
(18563 real changes made)
(59712 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105684 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102800 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237900 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179220 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61144 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102784 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103926 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238656 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179867 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63068 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103534 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102607 real changes made)
(18563 missing values generated)
(18563 real changes made)
(236732 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179185 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62878 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103287 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103228 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238612 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180390 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63462 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104141 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101296 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237246 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181165 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63134 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102582 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104825 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237110 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181178 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62187 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104447 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(105883 real changes made)
(18563 missing values generated)
(18563 real changes made)
(242092 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182218 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61112 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102603 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102883 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240136 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182002 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62553 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104293 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104345 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239320 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180351 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61807 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102497 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104541 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237045 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180641 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62019 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103571 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(103367 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240273 real changes made)
(18563 missing values generated)
(18563 real changes made)
(182104 real changes made)
(18563 missing values generated)
(18563 real changes made)
(59777 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103254 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104388 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239559 real changes made)
(18563 missing values generated)
(18563 real changes made)
(177568 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62301 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102502 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(102070 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239836 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180569 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62664 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103353 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(101868 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238293 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181021 real changes made)
(18563 missing values generated)
(18563 real changes made)
(58960 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102811 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(105425 real changes made)
(18563 missing values generated)
(18563 real changes made)
(240356 real changes made)
(18563 missing values generated)
(18563 real changes made)
(177432 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61335 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102199 real changes made)
(18563 missing values generated)
(18563 real changes made)
  9. }
(18563 missing values generated)
(18563 real changes made)
(104873 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238471 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180003 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61232 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104091 real changes made)
(18563 missing values generated)
(18563 real changes made)
(95988 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84348 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(95893 real changes made)
(18563 missing values generated)
(18563 real changes made)
(87700 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
  9. }
(18563 missing values generated)
(18563 real changes made)
(102967 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239589 real changes made)
(18563 missing values generated)
(18563 real changes made)
(180646 real changes made)
(18563 missing values generated)
(18563 real changes made)
(64176 real changes made)
(18563 missing values generated)
(18563 real changes made)
(103648 real changes made)
(18563 missing values generated)
(18563 real changes made)
. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336624 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337598 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

  9. }
(18563 missing values generated)
(18563 real changes made)
(104290 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237814 real changes made)
(18563 missing values generated)
(18563 real changes made)
(179467 real changes made)
(18563 missing values generated)
(18563 real changes made)
(63478 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101299 real changes made)
(18563 missing values generated)
(18563 real changes made)
(95797 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84156 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(97496 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84548 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94440 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84413 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94000 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85196 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(95682 real changes made)
(18563 missing values generated)
(18563 real changes made)
(88093 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94329 real changes made)
(18563 missing values generated)
(18563 real changes made)
(83976 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336881 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
(95375 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86394 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

(94627 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85320 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertensio. qui egen agedead = max(age), by(id)

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336098 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(336512 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

(93560 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84579 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337426 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

(95383 real changes made)
(18563 missing values generated)
(18563 real changes made)
(83692 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. replace agedead=agedead+1
(336592 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
(96258 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85748 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336798 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(336939 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

(95714 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86211 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
  9. }
(18563 missing values generated)
(18563 real changes made)
(104884 real changes made)
(18563 missing values generated)
(18563 real changes made)
(237648 real changes made)
(18563 missing values generated)
(18563 real changes made)
(178083 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62152 real changes made)
(18563 missing values generated)
(18563 real changes made)
(101690 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(337375 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui gen temp_age_smoke = age if smoke==2

(95879 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85005 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. replace agedead=agedead+1
(335990 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui gen temp_age_smoke = age if smoke==2

(94737 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85269 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(95838 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85711 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94264 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85764 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. qui egen agedead = max(age), by(id)

. qui egen agedead = max(age), by(id)

(93974 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85865 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. replace agedead=agedead+1
(335874 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(336624 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_smoke = age if smoke==2

(94287 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86764 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
  9. }
(18563 missing values generated)
(18563 real changes made)
(103422 real changes made)
(18563 missing values generated)
(18563 real changes made)
(238380 real changes made)
(18563 missing values generated)
(18563 real changes made)
(177011 real changes made)
(18563 missing values generated)
(18563 real changes made)
(61113 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102385 real changes made)
(18563 missing values generated)
(18563 real changes made)
. qui egen agedead = max(age), by(id)

(96711 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86701 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. replace agedead=agedead+1
(336240 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
(94707 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84325 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

(92643 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85939 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
  9. }
(18563 missing values generated)
(18563 real changes made)
(102888 real changes made)
(18563 missing values generated)
(18563 real changes made)
(239259 real changes made)
(18563 missing values generated)
(18563 real changes made)
(181287 real changes made)
(18563 missing values generated)
(18563 real changes made)
(62447 real changes made)
(18563 missing values generated)
(18563 real changes made)
(102242 real changes made)
(18563 missing values generated)
(18563 real changes made)
. qui egen agedead = max(age), by(id)

. qui egen agedead = max(age), by(id)

.         recode smoke (2=1) (else=0), gen(smoker)
(336623 differences between smoke and smoker)
. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(337208 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(336784 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337554 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

(95899 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85695 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         recode smoke (2=1) (else=0), gen(smoker)
(337597 differences between smoke and smoker)
. replace agedead=agedead+1
(337024 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_smoke = age if smoke==2

(95575 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85848 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. qui egen agedead = max(age), by(id)

(94300 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84312 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(93849 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85822 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337140 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
. replace agedead=agedead+1
(336069 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

.         by id: gen temp_nyrs_smoke=sum(smoker)

(93644 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85503 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(98009 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84448 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

.         qui gen temp_age_smoke = age if smoke==2

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94510 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85880 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_smoke=sum(smoker)

(95482 real changes made)
(18563 missing values generated)
(18563 real changes made)
(83960 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

. qui egen agedead = max(age), by(id)

(92275 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84630 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
(94493 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86344 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
. replace agedead=agedead+1
(337594 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337018 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop smoker temp_nyrs_smoke

(94191 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86992 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

(93378 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85528 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var nyrs_lunge "number of years with lung disease"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
ae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

(96219 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84925 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_quit = age if smoke==3

. qui egen agedead = max(age), by(id)

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336795 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(337725 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

.         drop smoker temp_nyrs_smoke

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336820 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(336412 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. replace agedead=agedead+1
(337063 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
(95189 real changes made)
(18563 missing values generated)
(18563 real changes made)
(83449 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337553 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_smoke = age if smoke==2

.         label var agefirst_smoke "age first smoke"

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(337329 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

. replace agedead=agedead+1
(337154 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(335916 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

. qui egen agedead = max(age), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

. replace agedead=agedead+1
(336327 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_smoke = age if smoke==2

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

. replace agedead=agedead+1
(337836 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(336867 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
. qui egen agedead = max(age), by(id)

.         qui gen temp_age_smoke = age if smoke==2

. replace agedead=agedead+1
(337049 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         recode smoke (2=1) (else=0), gen(smoker)
(337425 differences between smoke and smoker)
(96626 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84229 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui gen temp_age_smoke = age if smoke==2

. qui egen agedead = max(age), by(id)

. replace agedead=agedead+1
(336682 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
(94149 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86086 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"



. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui gen temp_age_smoke = age if smoke==2

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         recode smoke (2=1) (else=0), gen(smoker)
(336797 differences between smoke and smoker)
.         recode smoke (2=1) (else=0), gen(smoker)
(336880 differences between smoke and smoker)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
(94870 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85190 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         recode smoke (2=1) (else=0), gen(smoker)
(336511 differences between smoke and smoker)
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         recode smoke (2=1) (else=0), gen(smoker)
(337374 differences between smoke and smoker)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         recode smoke (2=1) (else=0), gen(smoker)
(336591 differences between smoke and smoker)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

. qui egen agedead = max(age), by(id)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke


.         *qui egen nyrs_smoke = total(smoker), by(id) 
. replace agedead=agedead+1
(337028 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui gen temp_age_smoke = age if smoke==2

.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(335873 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         recode smoke (2=1) (else=0), gen(smoker)
(336097 differences between smoke and smoker)
.         qui gen temp_age_quit = age if smoke==3

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen temp_nyrs_smoke=sum(smoker)

. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_quit = age if smoke==3

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

. replace agedead=agedead+1
(336151 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui gen temp_age_smoke = age if smoke==2

.         drop smoker temp_nyrs_smoke

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

ted)
(18563 real changes made)
(82947 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         drop smoker temp_nyrs_smoke

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(336938 differences between smoke and smoker)
.         drop smoker temp_nyrs_smoke

.         drop smoker temp_nyrs_smoke

. qui egen agedead = max(age), by(id)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3

.         drop smoker temp_nyrs_smoke

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

. replace agedead=agedead+1
(336561 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_quit = age if smoke==3

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_quit = age if smoke==3

.         drop smoker temp_nyrs_smoke

.         qui gen temp_age_smoke = age if smoke==2

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_quit = age if smoke==3

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         recode smoke (2=1) (else=0), gen(smoker)
(336623 differences between smoke and smoker)
.         recode smoke (2=1) (else=0), gen(smoker)
(337023 differences between smoke and smoker)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode smoke (2=1) (else=0), gen(smoker)
(336783 differences between smoke and smoker)
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

(94966 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84378 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode smoke (2=1) (else=0), gen(smoker)
(337553 differences between smoke and smoker)
.         recode smoke (2=1) (else=0), gen(smoker)
(335989 differences between smoke and smoker)
(92386 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86712 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

. replace agedead=agedead+1
(336854 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_smoke = age if smoke==2

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(337139 differences between smoke and smoker)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop smoker temp_nyrs_smoke

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         recode smoke (2=1) (else=0), gen(smoker)
(336068 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode smoke (2=1) (else=0), gen(smoker)
(336819 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         label var nyrs_smoke "number of years smoking"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         drop smoker temp_nyrs_smoke

.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

. replace agedead=agedead+1
(336137 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode smoke (2=1) (else=0), gen(smoker)
(337207 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         recode smoke (2=1) (else=0), gen(smoker)
(337328 differences between smoke and smoker)
.         recode smoke (2=1) (else=0), gen(smoker)
(336239 differences between smoke and smoker)
.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_smoke = age if smoke==2

.         recode smoke (2=1) (else=0), gen(smoker)
(337593 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop smoker temp_nyrs_smoke

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(338574 differences between smoke and smoker)
.         drop smoker temp_nyrs_smoke

. qui egen agedead = max(age), by(id)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode smoke (2=1) (else=0), gen(smoker)
(335915 differences between smoke and smoker)
.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(337552 differences between smoke and smoker)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_smoke=sum(smoker)

. replace agedead=agedead+1
(337789 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_quit = age if smoke==3

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_smoke = age if smoke==2


.         *qui egen nyrs_smoke = total(smoker), by(id) 

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode smoke (2=1) (else=0), gen(smoker)
(337017 differences between smoke and smoker)
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         recode smoke (2=1) (else=0), gen(smoker)
(337724 differences between smoke and smoker)
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

(96575 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84318 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

(96348 real changes made)
(18563 missing values generated)
(18563 real changes made)
(85895 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode smoke (2=1) (else=0), gen(smoker)
(337062 differences between smoke and smoker)
.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(336411 differences between smoke and smoker)
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         
. * BMI
.         drop smoker temp_nyrs_smoke

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_quit = age if smoke==3

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(337835 differences between smoke and smoker)
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336623 differences between bmi and obese)
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop smoker temp_nyrs_smoke

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop smoker temp_nyrs_smoke


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(336326 differences between smoke and smoker)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui gen temp_age_quit = age if smoke==3

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_quit = age if smoke==3

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop smoker temp_nyrs_smoke

.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_smoke

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         label var agefirst_smoke "age first smoke"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(337153 differences between smoke and smoker)
.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_obese=sum(obese)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop smoker temp_nyrs_smoke

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

. qui egen agedead = max(age), by(id)

.         drop smoker temp_nyrs_smoke

. qui egen agedead = max(age), by(id)

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

. replace agedead=agedead+1
(337307 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

. replace agedead=agedead+1
(336674 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123490 real changes made)

.         label var nyrs_obese "number of years obese"    


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         drop temp_age_quit

.         
. * BMI
.         recode smoke (2=1) (else=0), gen(smoker)
(336150 differences between smoke and smoker)
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_smoke = age if smoke==2

.         recode smoke (2=1) (else=0), gen(smoker)
(336866 differences between smoke and smoker)
.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_obese = age if obese==1

.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(336794 differences between smoke and smoker)
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop smoker temp_nyrs_smoke

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         recode smoke (2=1) (else=0), gen(smoker)
(337048 differences between smoke and smoker)
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode smoke (2=1) (else=0), gen(smoker)
(336681 differences between smoke and smoker)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         recode bmi (2/3=1) (1=0), gen(obese)
(337597 differences between bmi and obese)
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         drop smoker temp_nyrs_smoke

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui gen temp_age_quit = age if smoke==3

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         recode bmi (2/3=1) (1=0), gen(obese)
(336511 differences between bmi and obese)
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop smoker temp_nyrs_smoke

.         drop temp_age_quit

.         
. * BMI
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode bmi (2/3=1) (1=0), gen(obese)
(335873 differences between bmi and obese)
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(337027 differences between smoke and smoker)
.         drop temp_age_quit

.         
. * BMI
.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop smoker temp_nyrs_smoke

.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336797 differences between bmi and obese)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_obese = total(obese), by(id)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336591 differences between bmi and obese)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)


.         *qui egen nyrs_obese = total(obese), by(id)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_obese = total(obese), by(id)
.         drop smoker temp_nyrs_smoke

.         recode smoke (2=1) (else=0), gen(smoker)
(336853 differences between smoke and smoker)
.         drop smoker temp_nyrs_smoke

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337425 differences between bmi and obese)
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336880 differences between bmi and obese)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125756 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125117 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_obese = total(obese), by(id)
.         qui gen temp_age_obese = age if obese==1

.         recode bmi (2/3=1) (1=0), gen(obese)
(337374 differences between bmi and obese)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125466 real changes made)

.         label var nyrs_obese "number of years obese"    


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125779 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_obese = age if obese==1

.         drop smoker temp_nyrs_smoke

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         drop temp_age_quit

.         
. * BMI
.         recode smoke (2=1) (else=0), gen(smoker)
(336560 differences between smoke and smoker)
.         qui gen temp_age_obese = age if obese==1

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode bmi (2/3=1) (1=0), gen(obese)
(337023 differences between bmi and obese)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         qui gen temp_age_quit = age if smoke==3

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
(95400 real changes made)
(18563 missing values generated)
(18563 real changes made)
(84030 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125717 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_obese = total(obese), by(id)
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124925 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_quit

.         
. * BMI
.         recode smoke (2=1) (else=0), gen(smoker)
(337788 differences between smoke and smoker)
.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336097 differences between bmi and obese)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336938 differences between bmi and obese)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126759 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode bmi (2/3=1) (1=0), gen(obese)
(336623 differences between bmi and obese)
.         drop temp_age_quit

.         
. * BMI
.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui gen temp_age_obese = age if obese==1

.         recode bmi (2/3=1) (1=0), gen(obese)
(336783 differences between bmi and obese)
.         drop smoker temp_nyrs_smoke

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123211 real changes made)

.         label var nyrs_obese "number of years obese"    


.         *qui egen nyrs_smoke = total(smoker), by(id) 
(95647 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86463 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

.  . * add age of death
_obese = total(obese), by(id)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125532 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         qui gen temp_age_obese = age if obese==1

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui gen temp_age_obese = age if obese==1

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_quit

.         
. * BMI
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_obese=sum(obese)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop smoker temp_nyrs_smoke

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

(95664 real changes made)
(18563 missing values generated)
(18563 real changes made)
(86730 real changes made)

. label var nyrs_diabe "number of years with diabetes"

. label var nyrs_hibpe "number of years with hypertension"

. label var nyrs_hearte "number of years with heart disease"

. label var nyrs_stroke "number of years with stroke"

. label var nyrs_cancre "number of years with cancer"

. label var nyrs_lunge "number of years with lung disease"

. label var nyrs_mentae "number of years with mental illness"

. 
. label var agefirst_diabe "first age with diabetes"

. label var agefirst_hibpe "first age with hypertension"

. label var agefirst_hearte "first age with heart disease"

. label var agefirst_stroke "first age with stroke"

. label var agefirst_cancre "first age with cancre"

. label var agefirst_lunge "first age with lung disease"

. label var agefirst_mentae "first age with mental illness"

. 
. * add age of death
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124325 real changes made)

.         label var nyrs_obese "number of years obese"    

.         drop smoker temp_nyrs_smoke

.         recode bmi (2/3=1) (1=0), gen(obese)
(337553 differences between bmi and obese)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui gen temp_age_obese = age if obese==1

.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125631 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

. qui egen agedead = max(age), by(id)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126202 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen temp_age_obese = age if obese==1

. replace agedead=agedead+1
(335892 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         recode smoke (2=1) (else=0), gen(smoker)
(336136 differences between smoke and smoker)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336068 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336819 differences between bmi and obese)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126648 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen temp_age_smoke = age if smoke==2

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_obese = total(obese), by(id)
.         recode bmi (2/3=1) (1=0), gen(obese)
(337207 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336239 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(337593 differences between bmi and obese)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode bmi (2/3=1) (1=0), gen(obese)
(335989 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(335915 differences between bmi and obese)
. qui egen agedead = max(age), by(id)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_obese = total(obese), by(id)

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         recode bmi (2/3=1) (1=0), gen(obese)
(337724 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(337139 differences between bmi and obese)
. replace agedead=agedead+1
(336841 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)


.         *qui egen nyrs_obese = total(obese), by(id)
.         recode bmi (2/3=1) (1=0), gen(obese)
(337328 differences between bmi and obese)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui gen temp_age_smoke = age if smoke==2

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

. qui egen agedead = max(age), by(id)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124084 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_obese=sum(obese)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

. replace agedead=agedead+1
(338043 real changes made)

. label var agedead "age of death"

. 
. * smoking
. 
.         recode bmi (2/3=1) (1=0), gen(obese)
(337017 differences between bmi and obese)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337062 differences between bmi and obese)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen temp_nyrs_obese=sum(obese)

.         recode smoke (2=1) (else=0), gen(smoker)
(337306 differences between smoke and smoker)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)

.         *qui egen nyrs_obese = total(obese), by(id)
.         qui gen temp_age_smoke = age if smoke==2

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125621 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125203 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_obese=sum(obese)

.         drop smoker temp_nyrs_smoke

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126268 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


         qui gen temp_age_obese = age if obese==1

.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         recode bmi (2/3=1) (1=0), gen(obese)
(337552 differences between bmi and obese)

.         *qui egen nyrs_obese = total(obese), by(id)
.         qui gen temp_age_obese = age if obese==1

.         qui gen temp_age_obese = age if obese==1

.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123217 real changes made)

.         label var nyrs_obese "number of years obese"    

.         recode bmi (2/3=1) (1=0), gen(obese)
(336326 differences between bmi and obese)
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337835 differences between bmi and obese)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125838 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen temp_age_obese = age if obese==1

.         by id: gen temp_nyrs_obese=sum(obese)

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125929 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         recode smoke (2=1) (else=0), gen(smoker)
(336673 differences between smoke and smoker)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125310 real changes made)

.         label var nyrs_obese "number of years obese"    

.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124393 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123912 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(127471 real changes made)

.         label var nyrs_obese "number of years obese"    


.         *qui egen nyrs_obese = total(obese), by(id)
.         qui gen temp_age_obese = age if obese==1

.         recode bmi (2/3=1) (1=0), gen(obese)
(338574 differences between bmi and obese)
.         qui gen temp_age_obese = age if obese==1

.         drop temp_age_quit

.         
. * BMI
.         by id: gen temp_nyrs_smoke=sum(smoker)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123959 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen temp_age_obese = age if obese==1

.         qui gen temp_age_obese = age if obese==1

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123797 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui gen temp_age_obese = age if obese==1

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop temp_age_quit

.         
. * BMI
.         qui gen temp_age_obese = age if obese==1

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336623 differences between inv and disab)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         drop temp_age_quit

.         
. * BMI
.         drop smoker temp_nyrs_smoke

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124240 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124889 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen temp_age_quit = age if smoke==3

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_smoke = total(smoker), by(id) 

.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125366 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_disab=sum(disab)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_obese = age if obese==1

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: replace nyrs_obese=temp_nyrs_obese[_.         

(18563 real changes made)

. * disability
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254640 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125585 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         gen nyrs = agedead - age 

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui gen temp_age_obese = age if obese==1

.         drop smoker temp_nyrs_smoke

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui gen temp_age_quit = age if smoke==3

.         drop temp_age_quit

.         
. * BMI
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode bmi (2/3=1) (1=0), gen(obese)
(336794 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336681 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336866 differences between bmi and obese)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336411 differences between bmi and obese)
.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop temp_age_quit

.         
. * BMI

.         *qui egen nyrs_obese = total(obese), by(id)
.         recode bmi (2/3=1) (1=0), gen(obese)
(336150 differences between bmi and obese)

.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen temp_nyrs_obese=sum(obese)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         recode bmi (2/3=1) (1=0), gen(obese)
(337048 differences between bmi and obese)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336797 differences between inv and disab)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336511 differences between inv and disab)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125847 real changes made)

.         label var nyrs_obese "number of years obese"    


.         *qui egen nyrs_obese = total(obese), by(id)
.         recode ltc (3=1) (else=0), gen(nhome)
(323714 differences between ltc and nhome)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337153 differences between bmi and obese)
.         qui gen temp_age_obese = age if obese==1

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123940 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui gen temp_age_obese = age if obese==1


.         *qui egen nyrs_obese = total(obese), by(id)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124202 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_obese=sum(obese)


.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(335873 differences between inv and disab)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         label var nyrs_disab "number of years remaining disabled "


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop temp_age_quit

.         
. * BMI
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124980 real changes made)

.         label var nyrs_obese "number of years obese"    

.         recode bmi (2/3=1) (1=0), gen(obese)
(337027 differences between bmi and obese)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126046 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253271 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui gen temp_age_obese = age if obese==1

.         gen nyrs = agedead - age 

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336853 differences between bmi and obese)
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_obese = age if obese==1

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125869 real changes made)

.         label var nyrs_obese "number of years obese"    

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336880 differences between inv and disab)
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337374 differences between inv and disab)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255451 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_obese = total(obese), by(id)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337425 differences between inv and disab)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75453 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_disab=sum(disab)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337788 differences between bmi and obese)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337023 differences between inv and disab)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125020 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs = agedead - age 

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         qui gen temp_age_nhome = age if nhome==1

.         qui gen temp_age_obese = age if obese==1

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336591 differences between inv and disab)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop temp_age_quit

.         
. * BMI
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)


.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen temp_nyrs_disab=sum(disab)


.         *qui egen nyrs_obese = total(obese), by(id)
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(123549 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(252894 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "


.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"


.         qui gen temp_age_obese = age if obese==1

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen temp_nyrs_disab=sum(disab)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336938 differences between inv and disab)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)


.         recode inv (3/7=1) (1/2=0), gen(disab)
(336783 differences between inv and disab)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253492 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         label var agefirst_obese "age first becomes obese"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         gen nyrs = agedead - age 

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_disab=sum(disab)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         recode ltc (3=1) (else=0), gen(nhome)
(323888 differences between ltc and nhome)
.         qui egen agefirst_smoke = min(temp_age_smoke), by(id)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126167 real changes made)

.         label var nyrs_obese "number of years obese"    

.         drop temp_age_smoke

.         label var agefirst_smoke "age first smoke"

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255131 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_obese = age if obese==1

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336097 differences between inv and disab)

.         gen nyrs = agedead - age 


.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256996 real changes made)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255467 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_disab=sum(disab)

.         gen nyrs = agedead - age 

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         gen nyrs = agedead - age 

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336623 differences between inv and disab)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253906 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125101 real changes made)

.         label var nyrs_obese "number of years obese"    

.         gen nyrs_qaly = hc_hui*nyrs             

.         recode bmi (2/3=1) (1=0), gen(obese)
(336560 diffe. * institutionalization
ese)
.         gen nyrs = agedead - age 


.         recode smoke (2=1) (else=0), gen(smoker)
(336840 differences between smoke and smoker)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen temp_nyrs_disab=sum(disab)

.         qui gen temp_age_obese = age if obese==1

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         recode ltc (3=1) (else=0), gen(nhome)
(323602 differences between ltc and nhome)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254543 real changes made)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337553 differences between inv and disab)
.         recode ltc (3=1) (else=0), gen(nhome)
(322964 differences between ltc and nhome)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74595 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255272 real changes made)

.         gen nyrs = agedead - age 

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254717 real changes made)

.         gen nyrs = agedead - age 

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"


.         recode inv (3/7=1) (1/2=0), gen(disab)
(336068 differences between inv and disab)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337593 differences between inv and disab)
.         recode smoke (2=1) (else=0), gen(smoker)
(338042 differences between smoke and smoker)
.         gen nyrs = agedead - age 

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         drop temp_age_quit

.         
. * BMI
.         by id: gen temp_nyrs_disab=sum(disab)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         recode ltc (3=1) (else=0), gen(nhome)
(323971 differences between ltc and nhome)
.         recode ltc (3=1) (else=0), gen(nhome)
(324465 differences between ltc and nhome)
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336819 differences between inv and disab)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)


.         recode inv (3/7=1) (1/2=0), gen(disab)
(335915 differences between inv and disab)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode smoke (2=1) (else=0), gen(smoker)
(335891 differences between smoke and smoker)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337597 differences between inv and disab)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         recode bmi (2/3=1) (1=0), gen(obese)
(336136 differences between bmi and obese)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen temp_nyrs_disab=sum(disab)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen temp_nyrs_nhome=sum(nhome)


.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255674 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         gen nyrs = agedead - age 


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"


.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255844 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254846 real changes made)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode ltc (3=1) (else=0), gen(nhome)
(324516 differences between ltc and nhome)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         gen nyrs = agedead - age 

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         gen nyrs = agedead - age 

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         recode ltc (3=1) (else=0), gen(nhome)
(324114 differences between ltc and nhome)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(72939 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)



.         recode ltc (3=1) (else=0), gen(nhome)
(323188 differences between ltc and nhome)
.         recode ltc (3=1) (else=0), gen(nhome)
(323682 differences between ltc and nhome)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337328 differences between inv and disab)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337017 differences between inv and disab)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)


.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255928 real changes made)

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(71958 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_disab=sum(disab)

.         recode ltc (3=1) (else=0), gen(nhome)
(324029 differences between ltc and nhome)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_nhome = age if nhome==1

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337207 differences between inv and disab)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         recode ltc (3=1) (else=0), gen(nhome)
(323874 differences between ltc and nhome)
.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         gen nyrs = agedead - age 

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73132 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen temp_age_nhome = age if nhome==1


.         *qui egen nyrs_smoke = total(smoker), by(id) 
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124449 real changes made)

.         label var nyrs_obese "number of years obese"    

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337139 differences between inv and disab)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen temp_nyrs_obese=sum(obese)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254940 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337062 differences between inv and disab)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen temp_age_obese = age if obese==1


.         gen nyrs = agedead - age 

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337724 differences between inv and disab)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_smoke=sum(smoker)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_quit = age if smoke==3

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73989 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         qui gen temp_age_nhome = age if nhome==1


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop temp_age_quit

.         
. * BMI
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254535 real changes made)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         drop smoker temp_nyrs_smoke


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(335989 differences between inv and disab)

.         gen nyrs = agedead - age 

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256067 real changes made)

.         by id: gen nyrs_smoke = temp_nyrs_smoke[_N]-temp_nyrs_smoke[_n-1]
(18563 missing values generated)


.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)


.         by id: gen temp_nyrs_nhome=sum(nhome)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_disab=sum(disab)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_quit = age if smoke==3

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336326 differences between inv and disab)
.         gen nyrs = agedead - age 

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256352 real changes made)

.         by id: replace nyrs_smoke=temp_nyrs_smoke[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73204 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124853 real changes made)

.         label var nyrs_obese "number of years obese"    

.         gen nyrs = agedead - age 

.         by id: gen temp_nyrs_disab=sum(disab)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode ltc (3=1) (else=0), gen(nhome)
(323714 differences between ltc and nhome)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"


.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)


.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen temp_age_obese = age if obese==1

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen temp_nyrs_disab=sum(disab)

.         recode bmi (2/3=1) (1=0), gen(obese)
(337306 differences between bmi and obese)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73359 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73657 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui replace nyrs_smoke = 2*nyrs_smoke - 1*smoker[_N]

.         label var nyrs_smoke "number of years smoking"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         recode ltc (3=1) (else=0), gen(nhome)
(324684 differences between ltc and nhome)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254827 real changes made)

.         qui gen temp_age_nhome = age if nhome==1


.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74866 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         recode ltc (3=1) (else=0), gen(nhome)
(324644 differences between ltc and nhome)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop smoker temp_nyrs_smoke

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(72942 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs = agedead - age 

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255231 real changes made)


.         recode ltc (3=1) (else=0), gen(nhome)
(323159 differences between ltc and nhome)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254164 real changes made)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_disab=sum(disab)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         gen nyrs = agedead - age 

.         qui gen temp_age_quit = age if smoke==3

.         gen nyrs = agedead - age 

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74212 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_nhome = age if nhome==1

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256212 real changes made)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode inv (3/7=1) (1/2=0), gen(disab)
(337835 differences between inv and disab)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256588 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         gen nyrs = agedead - age 

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs = agedead - age 

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode ltc (3=1) (else=0), gen(nhome)
(323910 differences between ltc and nhome)

.         *qui egen nyrs_nhome = total(nhome), by(id)

.         *qui egen nyrs_obese = total(obese), by(id)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75844 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_nhome=sum(nhome)


.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(252877 real changes made)

.         by id: gen temp_nyrs_obese=sum(obese)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs = agedead - age 

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_disab=sum(disab)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         recode ltc (3=1) (else=0), gen(nhome)
(323006 differences between ltc and nhome)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(252498 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         recode ltc (3=1) (else=0), gen(nhome)
(324419 differences between ltc and nhome)
.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         gen nyrs = agedead - age 

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         recode ltc (3=1) (else=0), gen(nhome)
(324688 differences between ltc and nhome)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(72738 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336239 differences between inv and disab)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(126882 real changes made)

.         label var nyrs_obese "number of years obese"    

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256122 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75200 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_obese = age if obese==1

.         recode ltc (2=1) (else=0), gen(homecare)
(323714 differences between ltc and homecare)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         recode bmi (2/3=1) (1=0), gen(obese)
(336673 differences between bmi and obese)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         gen nyrs = agedead - age 

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(72940 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen temp_age_nhome = age if nhome==1

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337552 differences between inv and disab)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen temp_age_nhome = age if nhome==1

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         recode ltc (3=1) (else=0), gen(nhome)
(324230 differences between ltc and nhome)
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         recode ltc (3=1) (else=0), gen(nhome)
(324153 differences between ltc and nhome)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         recode ltc (3=1) (else=0), gen(nhome)
(324108 differences between ltc and nhome)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         recode ltc (3=1) (else=0), gen(nhome)
(324815 differences between ltc and nhome)
.         by id: gen temp_nyrs_nhome=sum(nhome)


.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73393 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73837 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "


.         recode ltc (3=1) (else=0), gen(nhome)
(324298 differences between ltc and nhome)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen temp_nyrs_disab=sum(disab)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73678 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(338574 differences between inv and disab)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75007 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "


.         *qui egen nyrs_nhome = total(nhome), by(id)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_obese = total(obese), by(id)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336681 differences between inv and disab)
.         qui gen temp_age_nhome = age if nhome==1

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen temp_nyrs_nhome=sum(nhome)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         recode ltc (3=1) (else=0), gen(nhome)
(323080 differences between ltc and nhome)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244966 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         recode ltc (3=1) (else=0), gen(nhome)
(323417 differences between ltc and nhome)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254853 real changes made)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)


.         recode ltc (3=1) (else=0), gen(nhome)
(324926 differences between ltc and nhome)
.         gen nyrs = agedead - age 

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255272 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs = agedead - age 

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)


.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74968 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74442 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_nhome=sum(nhome)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(257894 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74395 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73192 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

..         *qui egen nyrs_nhome = total(nhome), by(id)
obese[_N]
(125520 real changes made)

.         label var nyrs_obese "number of years obese"    

.         gen nyrs = agedead - age 

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_nhome = age if nhome==1

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode ltc (2=1) (else=0), gen(homecare)
(323888 differences between ltc and homecare)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74970 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337153 differences between inv and disab)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_nhome = age if nhome==1

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336794 differences between inv and disab)
.         qui gen temp_age_obese = age if obese==1

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255610 real changes made)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337048 differences between inv and disab)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73710 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs = agedead - age 

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336411 differences between inv and disab)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74381 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_nhome = age if nhome==1

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75114 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         drop temp_age_quit

.         
. * BMI


.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)

.         recode ltc (3=1) (else=0), gen(nhome)
(323330 differences between ltc and nhome)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336853 differences between inv and disab)
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         recode ltc (2=1) (else=0), gen(homecare)
(322964 differences between ltc and homecare)
.         recode inv (3/7=1) (1/2=0), gen(disab)
(336866 differences between inv and disab)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337027 differences between inv and disab)


.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(324465 differences between ltc and homecare)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254175 real changes made)

.         by id: gen temp_nyrs_disab=sum(disab)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_disab=sum(disab)

.         gen nyrs = agedead - age 

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336150 differences between inv and disab)
.         recode ltc (2=1) (else=0), gen(homecare)
(323971 differences between ltc and homecare)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256529 real changes made)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)



.         *qui egen nyrs_nhome = total(nhome), by(id)
.         recode ltc (3=1) (else=0), gen(nhome)
(324643 differences between ltc and nhome)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         gen nyrs = agedead - age 

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245623 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)


.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       


.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         recode ltc (3=1) (else=0), gen(nhome)
(325665 differences between ltc and nhome)
.         qui gen temp_age_homecare = age if homecare==1

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen temp_nyrs_disab=sum(disab)

.         recode ltc (3=1) (else=0), gen(nhome)
(323772 differences between ltc and nhome)
.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen temp_nyrs_disab=sum(disab)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen temp_nyrs_homecare=sum(homecare)


.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337788 differences between inv and disab)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253293 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_disab=sum(disab)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255159 real changes made)

.         gen nyrs = agedead - age 

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         gen nyrs = agedead - age 

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73029 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(242775 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255549 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246325 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"


.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255727 real changes made)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253176 real changes made)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254035 real changes made)

.         gen nyrs = agedead - age 


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         gen nyrs = agedead - age 

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen temp_nyrs_disab=sum(disab)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         gen nyrs = agedead - age 

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         gen nyrs = agedead - age 

.         qui gen temp_age_homecare = age if homecare==1

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         recode ltc (2=1) (else=0), gen(homecare)
(324029 differences between ltc and homecare)
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         drop temp_age_quit

.         
. * BMI
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246928 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         recode bmi (2/3=1) (1=0), gen(obese)
(338042 differences between bmi and obese)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         recode ltc (3=1) (else=0), gen(nhome)
(324244 differences between ltc and nhome)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         recode ltc (2=1) (else=0), gen(homecare)
(323714 differences between ltc and homecare)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         recode ltc (2=1) (else=0), gen(homecare)
(323602 differences between ltc and homecare)
.         recode ltc (2=1) (else=0), gen(homecare)
(323874 differences between ltc and homecare)
.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255219 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74647 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         recode ltc (3=1) (else=0), gen(nhome)
(323885 differences between ltc and nhome)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75162 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         gen nyrs = agedead - age 

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(72801 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_nhome = age if nhome==1

.         qui gen temp_age_nhome = age if nhome==1


.         recode ltc (2=1) (else=0), gen(homecare)
(324516 differences between ltc and homecare)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_nhome = age if nhome==1

.         qui egen agefirst_quit = min(temp_age_quit), by(id)

.         label var agefirst_quit "age first quits smoking"


.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         drop temp_age_quit

.         
. * BMI
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         recode ltc (2=1) (else=0), gen(homecare)
(323188 differences between ltc and homecare)
.         recode ltc (3=1) (else=0), gen(nhome)
(324139 differences between ltc and nhome)
.         recode ltc (2=1) (else=0), gen(homecare)
(323682 differences between ltc and homecare)
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         recode ltc (2=1) (else=0), gen(homecare)
(324114 differences between ltc and homecare)

.         *qui egen nyrs_nhome = total(nhome), by(id)

.         *qui egen nyrs_nhome = total(nhome), by(id)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         recode ltc (3=1) (else=0), gen(nhome)
(323502 differences between ltc and nhome)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         *qui egen nyrs_obese = total(obese), by(id)
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         recode ltc (3=1) (else=0), gen(nhome)
(323241 differences between ltc and nhome)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode ltc (3=1) (else=0), gen(nhome)
(323957 differences between ltc and nhome)
.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         recode ltc (3=1) (else=0), gen(nhome)
(324118 differences between ltc and nhome)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245106 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"


.         *qui egen nyrs_nhome = total(nhome), by(id)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74801 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245566 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         recode ltc (3=1) (else=0), gen(nhome)
(323944 differences between ltc and nhome)
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75169 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode ltc (2=1) (else=0), gen(homecare)
(324684 differences between ltc and homecare)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"


.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_homecare=sum(homecare)


.         *qui egen nyrs_nhome = total(nhome), by(id)

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         recode ltc (2=1) (else=0), gen(homecare)
(324644 differences between ltc and homecare)
.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125501 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244070 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245608 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen temp_age_obese = age if obese==1

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       


.         *qui egen nyrs_nhome = total(nhome), by(id)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode ltc (3=1) (else=0), gen(nhome)
(324879 differences between ltc and nhome)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"


.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         recode ltc (2=1) (else=0), gen(homecare)
(323159 differences between ltc and homecare)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75011 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73340 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246099 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245586 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         label var ever_nhome "ever in a nursing home"   


.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         recode ltc (2=1) (else=0), gen(homecare)
(323910 differences between ltc and homecare)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245338 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246015 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen temp_age_homecare = age if homecare==1

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode bmi (2/3=1) (1=0), gen(obese)
(336840 differences between bmi and obese)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74260 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         recode ltc (2=1) (else=0), gen(homecare)
(324419 differences between ltc and homecare)
.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75850 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74691 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen temp_age_nhome = age if nhome==1

care - 1*homecare[_N]
(245274 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)


.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         recode ltc (2=1) (else=0), gen(homecare)
(323006 differences between ltc and homecare)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_nhome = age if nhome==1


.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(247103 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen temp_age_nhome = age if nhome==1

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var ever_homecare "ever received home care"       

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234908 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(323417 differences between ltc and homecare)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73758 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         recode ltc (2=1) (else=0), gen(homecare)
(324108 differences between ltc and homecare)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75546 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_homecare = age if homecare==1


.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         recode ltc (2=1) (else=0), gen(homecare)
(324230 differences between ltc and homecare)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen temp_age_nhome = age if nhome==1


.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245978 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)


.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336136 differences between inv and disab)

.         *qui egen nyrs_obese = total(obese), by(id)
.         recode ltc (2=1) (else=0), gen(homecare)
(323080 differences between ltc and homecare)
.         recode bmi (2/3=1) (1=0), gen(obese)
(335891 differences between bmi and obese)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246649 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_obese=sum(obese)

.         recode ltc (2=1) (else=0), gen(homecare)
(324153 differences between ltc and homecare)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(247441 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244520 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui gen temp_age_homecare = age if homecare==1


.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(324688 differences between ltc and homecare)
.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(324815 differences between ltc and homecare)
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1


.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236011 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244265 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(124523 real changes made)

.         label var nyrs_obese "number of years obese"    

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_homecare=sum(homecare)


.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_obese = age if obese==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245031 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"


.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_homecare = age if homecare==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         

.         *qui egen nyrs_obese = total(obese), by(id)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336560 differences between inv and disab)
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245656 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)


.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)


.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_obese=sum(obese)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         recode ltc (2=1) (else=0), gen(homecare)
(324926 differences between ltc and homecare)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245987 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1


.         by id: gen temp_nyrs_homecare=sum(homecare)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen nyrs_obese = temp_nyrs_obese[_N]-temp_nyrs_obese[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(243409 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(255367 real changes made)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(232688 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_obese=temp_nyrs_obese[_N] if _n==1
(18563 real changes made)

.         gen nyrs = agedead - age 

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1


.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246291 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244824 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_obese = 2*nyrs_obese - 1*obese[_N]
(125902 real changes made)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         label var nyrs_obese "number of years obese"    

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1 .         
real changes made)

. * homecare (formal)
.         
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen temp_age_obese = age if obese==1

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245821 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235925 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246588 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_disab=sum(disab)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236200 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254215 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         recode inv (3/7=1) (1/2=0), gen(disab)
(337306 differences between inv and disab)
.         gen nyrs = agedead - age 

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         recode ltc (3=1) (else=0), gen(nhome)
(323227 differences between ltc and nhome)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         recode ltc (2=1) (else=0), gen(homecare)
(324879 differences between ltc and homecare)
.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236233 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         recode ltc (2=1) (else=0), gen(homecare)
(323330 differences between ltc and homecare)
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(254058 real changes made)


.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234238 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235902 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         gen nyrs = agedead - age 

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236045 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         recode ltc (2=1) (else=0), gen(homecare)
(325665 differences between ltc and homecare)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73631 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         recode ltc (2=1) (else=0), gen(homecare)
(323772 differences between ltc and homecare)
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235396 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246248 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         recode ltc (3=1) (else=0), gen(nhome)
(323651 differences between ltc and nhome)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)


.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)


.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236804 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         recode ltc (2=1) (else=0), gen(homecare)
(323957 differences between ltc and homecare)
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235183 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"


.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236526 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234532 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         recode ltc (2=1) (else=0), gen(homecare)
(324244 differences between ltc and homecare)
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235897 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode ltc (2=1) (else=0), gen(homecare)
(324118 differences between ltc and homecare)
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(238379 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         recode ltc (2=1) (else=0), gen(homecare)
(323885 differences between ltc and homecare)
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244680 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)


.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         recode ltc (2=1) (else=0), gen(homecare)
(323502 differences between ltc and homecare)
.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244866 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246742 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         recode ltc (2=1) (else=0), gen(homecare)
(323241 differences between ltc and homecare)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)


.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       


.         recode ltc (3=1) (else=0), gen(nhome)
(324397 differences between ltc and nhome)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen temp_age_homecare = age if homecare==1

.         recode ltc (2=1) (else=0), gen(homecare)
(324643 differences between ltc and homecare)
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235613 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_homecare = age if homecare==1

rs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74336 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)


.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(233977 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236562 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         recode ltc (2=1) (else=0), gen(homecare)
(324139 differences between ltc and homecare)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190582 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)


.         qui gen temp_age_homecare_i = age if hc_homecare_i==1


.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245507 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245073 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192117 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246488 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_homecare = age if homecare==1

.         qui gen temp_age_homecare = age if homecare==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245220 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(233624 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(323944 differences between ltc and homecare)
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)


.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244204 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235684 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244879 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(75778 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235465 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336673 differences between inv and disab)
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(189138 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(233097 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246686 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235832 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen temp_age_nhome = age if nhome==1

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245489 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191992 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235776 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192889 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245837 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234735 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190213 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235650 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192336 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253966 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236022 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191696 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         recode inv (3/7=1) (1/2=0), gen(disab)
(338042 differences between inv and disab)
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         gen nyrs = agedead - age 

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_obese = min(temp_age_obese), by(id)

.         label var agefirst_obese "age first becomes obese"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         drop obese temp_age_obese temp_nyrs_obese

.         
. * disability
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191755 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191767 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192682 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"


.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191929 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen temp_nyrs_disab=sum(disab)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         recode ltc (2=1) (else=0), gen(homecare)
(323227 differences between ltc and homecare)
.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(194696 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         recode inv (3/7=1) (1/2=0), gen(disab)
(336840 differences between inv and disab)
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193530 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(256961 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236274 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         gen nyrs = agedead - age 

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192854 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

 by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191607 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)


.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236877 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    


.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_disab=sum(disab)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235159 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         recode ltc (3=1) (else=0), gen(nhome)
(323764 differences between ltc and nhome)
.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

ges made)

l)
.         
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193761 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193059 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76340 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(237269 real changes made)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235563 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245117 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234554 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253958 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190535 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         gen nyrs = agedead - age 

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192276 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77127 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191366 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(189947 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234918 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         recode inv (3/7=1) (1/2=0), gen(disab)
(335891 differences between inv and disab)
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(233232 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         recode ltc (3=1) (else=0), gen(nhome)
(325133 differences between ltc and nhome)
.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234255 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(75316 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)


.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190432 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: gen temp_nyrs_disab=sum(disab)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(74551 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76249 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         recode ltc (3=1) (else=0), gen(nhome)
(323931 differences between ltc and nhome)
.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190933 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen nyrs_disab = temp_nyrs_disab[_N]-temp_nyrs_disab[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191653 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_disab=temp_nyrs_disab[_N] if _n==1  
(18563 real changes made)

.         label var nyrs_disab "number of years remaining disabled "

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235106 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234541 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76354 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(76011 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_disab = nyrs_disab*2-1*disab[_N]
(253984 real changes made)


.         *qui egen nyrs_nhome = total(nhome), by(id)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         gen nyrs = agedead - age 

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen temp_age_nhome = age if nhome==1

.         gen nyrs_nondisab = nyrs - nyrs_disab

.         label var nyrs "number of years remaining (from current age)"

.         label var nyrs_nondisab "number of years remaining non disabled"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77238 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         drop disab 

.         *qui egen nyrs_disab = total(disab), by(id)
.         *recode inv (3/4=0) (1/2=1), gen(nondisab)
.         *qui egen nyrs_nondisab = total(nondisab), by(id)
.         *qui replace nyrs_nondisab = nyrs_nondisab*2
. 
.         
. * QALYs
.         *recode hc_hui (min/0 =0)
.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         gen nyrs_qaly = hc_hui*nyrs             

.         label var nyrs_qaly "number of QALY remaining " 

. * institutionalization
.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(73214 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(324397 differences between ltc and homecare)
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76994 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen temp_age_nhome = age if nhome==1

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         recode ltc (2=1) (else=0), gen(homecare)
(323651 differences between ltc and homecare)
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193042 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235345 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)


.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(75189 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)


.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         recode ltc (3=1) (else=0), gen(nhome)
(322982 differences between ltc and nhome)
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192312 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246263 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235845 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76866 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77172 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

care from spouse"     
>    

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(189998 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244779 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76826 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76896 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77887 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(79437 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]

.         *qui egen nyrs_nhome = total(nhome), by(id)
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192629 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77897 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_nhome=sum(nhome)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77627 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193231 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_nhome = temp_nyrs_nhome[_N]-temp_nyrs_nhome[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77553 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_nhome=temp_nyrs_nhome[_N] if _n==1  
(18563 real changes made)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_nhome = 2*nyrs_nhome - 1*nhome[_N]
(71962 real changes made)

.         label var nyrs_nhome "number of years remaining spent in nursing home
> "

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191463 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_nhome = (nyrs_nhome!=0)

.         label var ever_nhome "ever in a nursing home"   

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(75601 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_nhome = age if nhome==1

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(194576 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234752 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76289 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

sp==1

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76395 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         by id: gen temp_nyrs_home.         
(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(78866 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191893 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190741 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191882 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(74581 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193326 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192702 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77247 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190999 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77675 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

  6. }
(18563 missing values generated)
(18563 real changes made)
(236250 real changes made)
(18563 missing values generated)
(18563 real changes made)
(290460 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314275 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316791 real changes made)
(18563 missing values generated)
(18563 real changes made)
(189138 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75165 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         sort id year

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
  6. }
(18563 missing values generated)
(18563 real changes made)
(237456 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291638 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314726 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317247 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190213 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75316 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191411 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         sort id year

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(75569 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         recode ltc (2=1) (else=0), gen(homecare)
(323764 differences between ltc and homecare)
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         recode ltc (2=1) (else=0), gen(homecare)
(323931 differences between ltc and homecare)
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         recode ltc (2=1) (else=0), gen(homecare)
(325133 differences between ltc and homecare)
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77473 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77194 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(74381 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"


.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"


.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen temp_nyrs_homecare=sum(homecare)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen temp_nyrs_homecare=sum(homecare)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

  6. }
(18563 missing values generated)
(18563 real changes made)
(239237 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291660 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315007 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317523 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190582 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76340 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen temp_nyrs_homecare=sum(homecare)

  6. }
(18563 missing values generated)
(18563 real changes made)
(238574 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292577 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315796 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318304 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191992 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76249 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         sort id year

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         qui egen agefirst_nhome = min(temp_age_nhome), by(id)

.         label var agefirst_nhome "age first enters a nursing home"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

  6. }
(18563 missing values generated)
(18563 real changes made)
(237983 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291862 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315155 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317712 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192117 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77127 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246770 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         drop nhome temp_age_nhome nhome temp_nyrs_nhome

.         
.         
. * homecare (total)
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         sort id year

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192553 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(245723 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(244792 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         label var agefirst_homecare_i "age first receives informal home care"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  6. }
(18563 missing values generated)
(18563 real changes made)
(237323 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291930 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315313 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317789 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192889 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76354 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193282 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77016 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

. rename total_hc_drugs nyrs_hc_drugs

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen temp_age_homecare = age if homecare==1

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235173 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236085 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen temp_age_homecare = age if homecare==1

.         sort id year

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77916 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(79641 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  6. }
(18563 missing values generated)
(18563 real changes made)
(237533 real changes made)
(18563 missing values generated)
(18563 real changes made)
(290683 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314510 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317067 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192336 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77238 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191968 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         sort id year

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         recode ltc (2=1) (else=0), gen(homecare)
(322982 differences between ltc and homecare)
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
  6. }
(18563 missing values generated)
(18563 real changes made)
(239369 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291856 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315221 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317753 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192854 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76826 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

 13. }
(18563 missing values generated)
(18563 real changes made)
(74627 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74627 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160698 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160698 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300556 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(238113 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291763 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315724 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318299 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193530 real changes made)
(18563 missing values generated)
(18563 real changes made)
(79437 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         sort id year

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  6. }
(18563 missing values generated)
(18563 real changes made)
(237333 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291416 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314960 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317455 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191767 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77172 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77647 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

  6. }
(18563 missing values generated)
(18563 real changes made)
(237744 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291963 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315141 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317520 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191755 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76994 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77220 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

  6. }
(18563 missing values generated)
(18563 real changes made)
(237240 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291367 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314421 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317026 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191607 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76896 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

 13. }
(18563 missing values generated)
(18563 real changes made)
(75346 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75346 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159675 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159675 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301638 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         sort id year

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1


.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen temp_nyrs_homecare=sum(homecare)

  6. }
(18563 missing values generated)
(18563 real changes made)
(238445 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291799 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315258 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317877 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192682 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77887 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77021 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

  6. }
(18563 missing values generated)
(18563 real changes made)
(237906 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292464 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318573 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191696 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75189 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen nyrs_homecare = temp_nyrs_homecare[_N]-temp_nyrs_homecare[
> _n-1]
(18563 missing values generated)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

  6. }
(18563 missing values generated)
(18563 real changes made)
(237759 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291931 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314967 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317554 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191929 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76866 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         sort id year

.         sort id year

.         by id: replace nyrs_homecare=temp_nyrs_homecare[_N] if _n==1    
(18563 real changes made)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
  6. }
(18563 missing values generated)
(18563 real changes made)
(239015 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292704 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315963 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318492 real changes made)
(18563 missing values generated)
(18563 real changes made)
(194696 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77897 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  6. }
(18563 missing values generated)
(18563 real changes made)
(239166 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292579 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315792 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318362 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193761 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77627 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         sort id year

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76098 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
  6. }
(18563 missing values generated)
(18563 real changes made)
(238100 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292459 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315328 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317989 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191366 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77553 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: replace nyrs_homecare = 2*nyrs_homecare - 1*homecare[_N]
(246423 real changes made)

.         label var nyrs_homecare "number of years remaining spent receiving ho
> me care"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  6. }
(18563 missing values generated)
(18563 real changes made)
(238927 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292197 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315575 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318068 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192276 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76395 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         sort id year

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui gen ever_homecare = (nyrs_homecare!=0)

.         label var ever_homecare "ever received home care"       

.         sort id year

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare = age if homecare==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77038 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

  6. }
(18563 missing values generated)
(18563 real changes made)
(237302 real changes made)
(18563 missing values generated)
(18563 real changes made)
(290982 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314268 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316863 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190535 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76289 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76057 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77284 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         sort id year

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

  6. }
(18563 missing values generated)
(18563 real changes made)
(236988 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291116 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314306 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316899 real changes made)
(18563 missing values generated)
(18563 real changes made)
(189947 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75601 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

 13. }
(18563 missing values generated)
(18563 real changes made)
(75703 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75703 real changes made)
(18563 missing values generated)
(18563 real changes made)
(163396 real changes made)
(18563 missing values generated)
(18563 real changes made)
(163396 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303599 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
 13. }
(18563 missing values generated)
(18563 real changes made)
(74550 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74550 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160906 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160906 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303123 real changes made)
(18563 missing values generated)
(18563 real changes made)
 13. }
(18563 missing values generated)
(18563 real changes made)
(71845 real changes made)
(18563 missing values generated)
(18563 real changes made)
(71845 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162559 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162559 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301125 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(238079 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292200 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315433 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317989 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193059 real changes made)
(18563 missing values generated)
(18563 real changes made)
(78866 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
 13. }
(18563 missing values generated)
(18563 real changes made)
(74439 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74439 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159576 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159576 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300454 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  6. }
(18563 missing values generated)
(18563 real changes made)
(238002 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291790 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315565 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317948 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190933 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77675 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  6. }
(18563 missing values generated)
(18563 real changes made)
(239634 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292745 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316126 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318707 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191653 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77247 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         sort id year

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
  6. }
(18563 missing values generated)
(18563 real changes made)
(237644 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292014 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315113 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317695 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190432 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74581 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         sort id year

  6. }
(18563 missing values generated)
(18563 real changes made)
(240432 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292609 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316228 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318752 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192312 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75569 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192411 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
 13. }
(18563 missing values generated)
(18563 real changes made)
(75990 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75990 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159715 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159715 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301345 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         sort id year

.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
(301638 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106166 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106166 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119958 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300556 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105933 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105933 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120557 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119958 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

(120557 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

. capture drop t

. label data "simulated population from scenario $scenario"

 13. }
(18563 missing values generated)
(18563 real changes made)
(74335 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74335 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162381 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162381 real changes made)
(18563 missing values generated)
(18563 real changes made)
(304089 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

 13. }
(18563 missing values generated)
(18563 real changes made)
(74436 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74436 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161425 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161425 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303765 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         label var agefirst_homecare_f "age first receives formal home care"

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

  6. }
(18563 missing values generated)
(18563 real changes made)
(238226 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291855 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315380 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317940 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192629 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77194 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

 13. }
(18563 missing values generated)
(18563 real changes made)
(72974 real changes made)
(18563 missing values generated)
(18563 real changes made)
(72974 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159661 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159661 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301485 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(235834 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         sort id year

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

 13. }
(18563 missing values generated)
(18563 real changes made)
(76376 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76376 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159387 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159387 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300693 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

  6. }
(18563 missing values generated)
(18563 real changes made)
(240680 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292730 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316297 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318767 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193042 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77473 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77574 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(75502 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
 13. }
(18563 missing values generated)
(18563 real changes made)
(74626 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74626 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159388 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159388 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301837 real changes made)
(18563 missing values generated)
(18563 real changes made)
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

 13. }
(18563 missing values generated)
(18563 real changes made)
(74853 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74853 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161053 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161053 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301989 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

 13. }
(18563 missing values generated)
(18563 real changes made)
(74572 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74572 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161357 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161357 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302087 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(190148 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         sort id year

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236809 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

 13. }
(18563 missing values generated)
(18563 real changes made)
(73231 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73231 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161710 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161710 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302438 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

 13. }
(18563 missing values generated)
(18563 real changes made)
(75980 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75980 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160743 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160743 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301995 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

 13. }
(18563 missing values generated)
(18563 real changes made)
(77039 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77039 real changes made)
(18563 missing values generated)
(18563 real changes made)
(164384 real changes made)
(18563 missing values generated)
(18563 real changes made)
(164384 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303860 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(234674 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76461 real changes made)

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

 13. }
(18563 missing values generated)
(18563 real changes made)
(73384 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73384 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158909 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158909 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301533 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

  6. }
(18563 missing values generated)
(18563 real changes made)
(237582 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291982 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315589 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318162 real changes made)
(18563 missing values generated)
(18563 real changes made)
(189998 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74381 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
 13. }
(18563 missing values generated)
(18563 real changes made)
(75107 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75107 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160428 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160428 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302387 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
 13. }
(18563 missing values generated)
(18563 real changes made)
(73804 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73804 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159569 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159569 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301433 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         sort id year

  6. }
(18563 missing values generated)
(18563 real changes made)
(239336 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291270 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315184 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317606 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191463 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77916 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
(303123 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107834 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107834 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122351 real changes made)
(18563 missing values generated)
(18563 real changes made)
 13. }
(18563 missing values generated)
(18563 real changes made)
(74175 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74175 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300631 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(239574 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291731 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315555 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318090 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193231 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77016 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
(122351 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         sort id year

(301125 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105547 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105547 real changes made)
(18563 missing values generated)
(18563 real changes made)
(123329 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         qui egen agefirst_homecare = min(temp_age_homecare), by(id)

.         label var agefirst_homecare "age first receives home care"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         sort id year

(123329 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop homecare temp_age_homecare homecare temp_nyrs_homecare

.         
. * homecare (formal)
.         
 13. }
(18563 missing values generated)
(18563 real changes made)
(73683 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73683 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160793 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160793 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302247 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         by id: gen temp_nyrs_homecare_f=sum(hc_homecare_f)

(303599 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105638 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105638 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121433 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
(300454 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105796 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105796 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121730 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121433 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen nyrs_homecare_f = temp_nyrs_homecare_f[_N]-temp_nyrs_homec
> are_f[_n-1]
(18563 missing values generated)

(121730 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. capture drop t

. label data "simulated population from scenario $scenario"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: replace nyrs_homecare_f=temp_nyrs_homecare_f[_N] if _n==1     
>    
(18563 real changes made)

. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: replace nyrs_homecare_f = 2*nyrs_homecare_f - 1*hc_homecare_f[
> _N]
(236206 real changes made)

.         label var nyrs_homecare_f "number of years remaining spent receiving 
> formal home care"

 13. }
(18563 missing values generated)
(18563 real changes made)
(76484 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76484 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162118 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162118 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301244 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen ever_homecare_f = (nyrs_homecare_f!=0)

.         label var ever_homecare_f "ever received formal home care"      

 13. }
(18563 missing values generated)
(18563 real changes made)
(76722 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76722 real changes made)
(18563 missing values generated)
(18563 real changes made)
(163962 real changes made)
(18563 missing values generated)
(18563 real changes made)
(163962 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302757 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301345 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106675 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106675 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120327 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen temp_age_homecare_f = age if hc_homecare_f==1

(120327 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

 13. }
(18563 missing values generated)
(18563 real changes made)
(74577 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74577 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161153 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161153 real changes made)
(18563 missing values generated)
(18563 real changes made)
(304174 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

(303765 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106682 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106682 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121818 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

(121818 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  6. }
(18563 missing values generated)
(18563 real changes made)
(238636 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291766 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315201 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317756 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190741 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77647 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
  6. }
(18563 missing values generated)
(18563 real changes made)
(238283 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291822 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315339 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317779 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193326 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77220 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
(304089 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106659 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106659 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122689 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. capture drop t

. label data "simulated population from scenario $scenario"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
(122689 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
 13. }
(18563 missing values generated)
(18563 real changes made)
(74209 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74209 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159486 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159486 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303122 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
(301485 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106114 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122435 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300693 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105974 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105974 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120063 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77090 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

(120063 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  6. }
(18563 missing values generated)
(18563 real changes made)
(238700 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291793 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315493 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317979 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192702 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77021 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

(122435 real changes made)

.         
abel var ever_homecare_sp "ever received home care from spouse"     
>    

. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. capture drop t

. label data "simulated population from scenario $scenario"

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
. capture drop t

. label data "simulated population from scenario $scenario"

.         sort id year

(301837 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108559 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108559 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120292 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120292 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

 13. }
(18563 missing values generated)
(18563 real changes made)
(75937 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75937 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160515 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160515 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302185 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. capture drop t

. label data "simulated population from scenario $scenario"

(302438 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107374 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107374 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120772 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(237997 real changes made)
(18563 missing values generated)
(18563 real changes made)
(290870 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314486 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317073 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190999 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76098 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
(120772 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

 13. }
(18563 missing values generated)
(18563 real changes made)
(76620 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76620 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160991 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160991 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302647 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         sort id year

(301989 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107587 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107587 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121246 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
(301995 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107881 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107881 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119747 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121246 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(119747 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(302087 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105163 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105163 real changes made)
(18563 missing values generated)
(18563 real changes made)
(123514 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303860 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105170 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105170 real changes made)
(18563 missing values generated)
(18563 real changes made)
(124207 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(240175 real changes made)
(18563 missing values generated)
(18563 real changes made)
(293627 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316990 real changes made)
(18563 missing values generated)
(18563 real changes made)
(319517 real changes made)
(18563 missing values generated)
(18563 real changes made)
(194576 real changes made)
(18563 missing values generated)
(18563 real changes made)
(79641 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
(124207 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(123514 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  6. }
(18563 missing values generated)
(18563 real changes made)
(238830 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291102 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314768 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317315 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191411 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76057 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

. capture drop t

. label data "simulated population from scenario $scenario"

. capture drop t

. label data "simulated population from scenario $scenario"

. capture drop t

. label data "simulated population from scenario $scenario"

(301533 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108584 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108584 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121404 real changes made)
(18563 missing values generated)
(18563 real changes made)
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
. capture drop t

. label data "simulated population from scenario $scenario"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         sort id year

(121404 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

(302387 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107007 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107007 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119235 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301433 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106442 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106442 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119007 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

(119235 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(119007 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

(300631 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106005 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106005 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119464 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

(119464 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. capture drop t

. label data "simulated population from scenario $scenario"

(302247 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106327 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106327 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122577 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

(122577 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(192206 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

 13. }
(18563 missing values generated)
(18563 real changes made)
(74658 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74658 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162252 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162252 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303572 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(237185 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291488 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314661 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317156 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191882 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77284 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

  6. }
(18563 missing values generated)
(18563 real changes made)
(239372 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292370 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316086 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318517 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191893 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77038 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. capture drop t

. label data "simulated population from scenario $scenario"

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76492 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(193727 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         sort id year

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

 13. }
(18563 missing values generated)
(18563 real changes made)
(73236 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73236 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160151 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160151 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302891 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
(302757 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107220 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107220 real changes made)
(18563 missing values generated)
(18563 real changes made)
(123710 real changes made)
(18563 missing values generated)
(18563 real changes made)
(123710 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

. capture drop t

. label data "simulated population from scenario $scenario"

.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
(304174 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(109228 real changes made)
(18563 missing values generated)
(18563 real changes made)
(109228 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121296 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301244 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104443 real changes made)
(18563 missing values generated)
(18563 real changes made)
(104443 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122526 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122526 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(121296 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

. capture drop t

. label data "simulated population from scenario $scenario"

. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
 13. }
(18563 missing values generated)
(18563 real changes made)
(75040 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75040 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160527 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160527 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302145 real changes made)
(18563 missing values generated)
(18563 real changes made)
 13. }
(18563 missing values generated)
(18563 real changes made)
(75108 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75108 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160830 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160830 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303030 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191539 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

(302185 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107447 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107447 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121654 real changes made)
(18563 missing values generated)
(18563 real changes made)
 13. }
(18563 missing values generated)
(18563 real changes made)
(73784 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73784 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160669 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160669 real changes made)
(18563 missing values generated)
(18563 real changes made)
(304117 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121654 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

 13. }
(18563 missing values generated)
(18563 real changes made)
(74724 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74724 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159569 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159569 real changes made)
(18563 missing values generated)
(18563 real changes made)
(299691 real changes made)
(18563 missing values generated)
(18563 real changes made)
. capture drop t

. label data "simulated population from scenario $scenario"

(303122 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106116 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106116 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120660 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(238634 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291025 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314678 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317081 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191968 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75502 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
(120660 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

. capture drop t

. label data "simulated population from scenario $scenario"

.         qui egen agefirst_homecare_f = min(temp_age_homecare_f), by(id)

.         label var agefirst_homecare_f "age first receives formal home care"

(302647 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108003 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108003 real changes made)
(18563 missing values generated)
(18563 real changes made)
(119319 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         drop temp_age_homecare_f temp_nyrs_homecare_f

.         
. * homecare (informal)
.         
(119319 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen temp_nyrs_homecare_i=sum(hc_homecare_i)

. capture drop t

. label data "simulated population from scenario $scenario"

  6. }
(18563 missing values generated)
(18563 real changes made)
(238040 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291280 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315288 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317821 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193282 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77574 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         by id: gen nyrs_homecare_i = temp_nyrs_homecare_i[_N]-temp_nyrs_homec
> are_i[_n-1]
(18563 missing values generated)

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: replace nyrs_homecare_i=temp_nyrs_homecare_i[_N] if _n==1     
>    
(18563 real changes made)

.         sort id year

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         by id: replace nyrs_homecare_i = 2*nyrs_homecare_i - 1*hc_homecare_i[
> _N]
(191005 real changes made)

.         label var nyrs_homecare_i "number of years remaining spent receiving 
> informal home care"

(303572 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105572 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105572 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122128 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301866 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107837 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107837 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120828 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen ever_homecare_i = (nyrs_homecare_i!=0)

.         label var ever_homecare_i "ever received informal home care"    

 13. }
(18563 missing values generated)
(18563 real changes made)
(74750 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74750 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160225 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160225 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301771 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
(120828 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

 13. }
(18563 missing values generated)
(18563 real changes made)
(74333 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74333 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161750 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161750 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303751 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122128 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         qui gen temp_age_homecare_i = age if hc_homecare_i==1

. capture drop t

. label data "simulated population from scenario $scenario"

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. capture drop t

. label data "simulated population from scenario $scenario"

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
 13. }
(18563 missing values generated)
(18563 real changes made)
(73500 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73500 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158149 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158149 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301837 real changes made)
(18563 missing values generated)
(18563 real changes made)
 13. }
(18563 missing values generated)
(18563 real changes made)
(74017 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74017 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159884 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159884 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303503 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(239156 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292190 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315722 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318227 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192411 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77090 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
  6. }
(18563 missing values generated)
(18563 real changes made)
(238950 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292863 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315957 real changes made)
(18563 missing values generated)
(18563 real changes made)
(318466 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192553 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76461 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         sort id year

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         sort id year

.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(302891 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107081 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107081 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120951 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120951 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. capture drop t

. label data "simulated population from scenario $scenario"

(302145 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107870 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107870 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121368 real changes made)
(18563 missing values generated)
(18563 real changes made)
(299691 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107827 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107827 real changes made)
(18563 missing values generated)
(18563 real changes made)
(118902 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121368 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(118902 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

. capture drop t

. label data "simulated population from scenario $scenario"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(303030 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107220 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107220 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122200 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(79214 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

(122200 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

. capture drop t

. label data "simulated population from scenario $scenario"

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(304117 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107200 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107200 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121582 real changes made)
(18563 missing values generated)
(18563 real changes made)
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

  6. }
(18563 missing values generated)
(18563 real changes made)
(238226 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292007 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315035 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317500 real changes made)
(18563 missing values generated)
(18563 real changes made)
(190148 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76492 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

irst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
(121582 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         sort id year

. capture drop t

. label data "simulated population from scenario $scenario"

 13. }
(18563 missing values generated)
(18563 real changes made)
(72679 real changes made)
(18563 missing values generated)
(18563 real changes made)
(72679 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158632 real changes made)
(18563 missing values generated)
(18563 real changes made)
(158632 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301387 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

.         qui egen agefirst_homecare_i = min(temp_age_homecare_i), by(id)

.         label var agefirst_homecare_i "age first receives informal home care"

.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         drop temp_age_homecare_i temp_nyrs_homecare_i

.         
. * homecare (informal from spouse)
.         
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(77017 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

(303751 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108460 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108460 real changes made)
(18563 missing values generated)
(18563 real changes made)
(123482 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         by id: gen temp_nyrs_homecare_sp=sum(hc_homecare_sp)

(301771 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106276 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106276 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121100 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(123482 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

(121100 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         by id: gen nyrs_homecare_sp = temp_nyrs_homecare_sp[_N]-temp_nyrs_hom
> ecare_sp[_n-1]
(18563 missing values generated)

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: replace nyrs_homecare_sp=temp_nyrs_homecare_sp[_N] if _n==1   
>    
(18563 real changes made)

. capture drop t

. label data "simulated population from scenario $scenario"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76894 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         by id: replace nyrs_homecare_sp = 2*nyrs_homecare_sp - 1*hc_homecare_
> sp[_N]
(76454 real changes made)

.         label var nyrs_homecare_sp "number of years remaining spent receiving
>  home care from spouse"

.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

 13. }
(18563 missing values generated)
(18563 real changes made)
(74832 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74832 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160738 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160738 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302195 real changes made)
(18563 missing values generated)
(18563 real changes made)
.         qui gen ever_homecare_sp = (nyrs_homecare_sp!=0)

.         label var ever_homecare_sp "ever received home care from spouse"     
>    

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

.         qui gen temp_age_homecare_sp = age if hc_homecare_sp==1

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
 13. }
(18563 missing values generated)
(18563 real changes made)
(73776 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73776 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162109 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162109 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302427 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301837 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105537 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105537 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121283 real changes made)
(18563 missing values generated)
(18563 real changes made)
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(121283 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. capture drop t

. label data "simulated population from scenario $scenario"

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(72679 real changes made)
(18563 missing values generated)
(18563 real changes made)
(72679 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161713 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161713 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303663 real changes made)
(18563 missing values generated)
(18563 real changes made)
(303503 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107076 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107076 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121699 real changes made)
(18563 missing values generated)
(18563 real changes made)
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
(121699 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. capture drop t

. label data "simulated population from scenario $scenario"

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(71930 real changes made)
(18563 missing values generated)
(18563 real changes made)
(71930 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160151 real changes made)
(18563 missing values generated)
(18563 real changes made)
(160151 real changes made)
(18563 missing values generated)
(18563 real changes made)
(300888 real changes made)
(18563 missing values generated)
(18563 real changes made)
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
(301387 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106370 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106370 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121111 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121111 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
. capture drop t

. label data "simulated population from scenario $scenario"

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
(302195 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108269 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108269 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120688 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120688 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. capture drop t

. label data "simulated population from scenario $scenario"

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
(302427 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108592 real changes made)
(18563 missing values generated)
(18563 real changes made)
(108592 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121452 real changes made)
(18563 missing values generated)
(18563 real changes made)
(121452 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

(303663 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107434 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107434 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120106 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120106 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,785,377 bytes saved)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
. capture drop t

. label data "simulated population from scenario $scenario"

. capture drop t

. label data "simulated population from scenario $scenario"

(300888 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107168 real changes made)
(18563 missing values generated)
(18563 real changes made)
(107168 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120918 real changes made)
(18563 missing values generated)
(18563 real changes made)
  6. }
(18563 missing values generated)
(18563 real changes made)
(239776 real changes made)
(18563 missing values generated)
(18563 real changes made)
(293063 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316360 real changes made)
(18563 missing values generated)
(18563 real changes made)
(319013 real changes made)
(18563 missing values generated)
(18563 real changes made)
(193727 real changes made)
(18563 missing values generated)
(18563 real changes made)
(79214 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-30.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
(120918 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

. capture drop t

. label data "simulated population from scenario $scenario"

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
  nyrs_obese was float now byte
  agefirst_obese was float now byte
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now byte
.         qui egen agefirst_homecare_sp = min(temp_age_homecare_sp), by(id)

.         label var agefirst_homecare_sp "age first receives home care from spo
> use"

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
.         drop temp_age_homecare_sp temp_nyrs_homecare_sp

. 
. 
. * health care use
. foreach var of varlist hc_nights hc_specialist hc_generalist hc_drugs hours_h
> omecare_i hours_homecare_sp {
  2.         * count number of periods
.         *qui egen total_`var' = total(`var'), by(id)
.         * adjust for gap in years
.         by id: gen temp_total_`var' = sum(`var')
  3.         by id: gen total_`var' = temp_total_`var'[_N]-temp_total_`var'[_n-
> 1]
  4.         by id: replace total_`var'=temp_total_`var'[_N] if _n==1        
  5.         by id: replace total_`var' = 2*total_`var'  - 1*total_`var'[_N]
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,172,508 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-42.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  6. }
(18563 missing values generated)
(18563 real changes made)
(237593 real changes made)
(18563 missing values generated)
(18563 real changes made)
(291728 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315113 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317606 real changes made)
(18563 missing values generated)
(18563 real changes made)
(192206 real changes made)
(18563 missing values generated)
(18563 real changes made)
(77017 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,483,728 bytes saved)

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-36.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,381,100 bytes saved)

  6. }
(18563 missing values generated)
(18563 real changes made)
(236981 real changes made)
(18563 missing values generated)
(18563 real changes made)
(290929 real changes made)
(18563 missing values generated)
(18563 real changes made)
(314338 real changes made)
(18563 missing values generated)
(18563 real changes made)
(316818 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191005 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76454 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
.         sort id year

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-37.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,078,602 bytes saved)

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(75716 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75716 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161130 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161130 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302867 real changes made)
(18563 missing values generated)
(18563 real changes made)
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,594,125 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  6. }
(18563 missing values generated)
(18563 real changes made)
(238351 real changes made)
(18563 missing values generated)
(18563 real changes made)
(292441 real changes made)
(18563 missing values generated)
(18563 real changes made)
(315369 real changes made)
(18563 missing values generated)
(18563 real changes made)
(317774 real changes made)
(18563 missing values generated)
(18563 real changes made)
(191539 real changes made)
(18563 missing values generated)
(18563 real changes made)
(76894 real changes made)

. label var total_hc_nights "total number of nights ever spent"

. label var total_hc_specialist "total number of specialist visits ever"

. label var total_hc_generalist "total number of generalist visits ever"

. label var total_hours_homecare_i "total number of informal homecare hours eve
> r"

. 
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-15.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. rename total_hc_drugs nyrs_hc_drugs

. label var nyrs_hc_drugs "total number of years taking drugs"

. 
. * cost
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-41.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
.         sort id year

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
.         by id: gen fyear = year[1] 

. foreach var of varlist cost_nights cost_specialist cost_generalist cost_drugs
>  cost_nhome cost_homecare_f {
  2.         * npv discounted
.         gen temp_`var' = `var'*2
  3.         qui gen temp_`var'_d = temp_`var' * exp(-$discount*(year-fyear))
  4.         by id: gen temp_totdis_`var'=sum(temp_`var'_d)
  5.         by id: gen totaldis_`var' = temp_totdis_`var'[_N]-temp_totdis_`var
> '[_n-1]
  6.         by id: replace totaldis_`var'=temp_totdis_`var'[_N] if _n==1    
  7.         * adjust for gap in years and last year
.         by id: replace totaldis_`var' = totaldis_`var' - .5*totaldis_`var'[_N
> ]
  8.         
.         *Undiscounte
.         by id: gen temp_totundis_`var'=sum(temp_`var')
  9.         by id: gen totalundis_`var' = temp_totundis_`var'[_N]-temp_totundi
> s_`var'[_n-1]
 10.         by id: replace totalundis_`var'=temp_totundis_`var'[_N] if _n==1  
>       
 11.         * adjust for gap in years and last year
.         by id: replace totalundis_`var' = totalundis_`var' - .5*totalundis_`v
> ar'[_N]
 12.         drop temp_*
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,869,031 bytes saved)

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now byte
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,493,600 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-17.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-20.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,559,450 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(75152 real changes made)
(18563 missing values generated)
(18563 real changes made)
(75152 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159285 real changes made)
(18563 missing values generated)
(18563 real changes made)
(159285 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301761 real changes made)
(18563 missing values generated)
(18563 real changes made)
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,936,679 bytes saved)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,859,820 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-14.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-47.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-8.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,866,972 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-29.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,723,316 bytes saved)

. compress
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,082,488 bytes saved)

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(73633 real changes made)
(18563 missing values generated)
(18563 real changes made)
(73633 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162956 real changes made)
(18563 missing values generated)
(18563 real changes made)
(162956 real changes made)
(18563 missing values generated)
(18563 real changes made)
(301968 real changes made)
(18563 missing values generated)
(18563 real changes made)
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-43.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,726,520 bytes saved)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-34.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,976,694 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-24.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-26.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
(302867 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(110078 real changes made)
(18563 missing values generated)
(18563 real changes made)
(110078 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120011 real changes made)
(18563 missing values generated)
(18563 real changes made)
(120011 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,825,392 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. capture drop t

. label data "simulated population from scenario $scenario"

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
 13. }
(18563 missing values generated)
(18563 real changes made)
(74483 real changes made)
(18563 missing values generated)
(18563 real changes made)
(74483 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161379 real changes made)
(18563 missing values generated)
(18563 real changes made)
(161379 real changes made)
(18563 missing values generated)
(18563 real changes made)
(302321 real changes made)
(18563 missing values generated)
(18563 real changes made)
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-16.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,217,172 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,889,718 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-23.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,970,654 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-39.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,013,236 bytes saved)

(301761 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106816 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106816 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122831 real changes made)
(18563 missing values generated)
(18563 real changes made)
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-13.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
(122831 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-6.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,006,139 bytes saved)

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. capture drop t

. label data "simulated population from scenario $scenario"

  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,553,600 bytes saved)

. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-9.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-22.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,334,200 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-45.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
(301968 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106878 real changes made)
(18563 missing values generated)
(18563 real changes made)
(106878 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122193 real changes made)
(18563 missing values generated)
(18563 real changes made)
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
(122193 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,838,982 bytes saved)

. capture drop t

. label data "simulated population from scenario $scenario"

  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-27.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,222,440 bytes saved)

  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,866,917 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-44.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-46.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
(302321 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(0 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105307 real changes made)
(18563 missing values generated)
(18563 real changes made)
(105307 real changes made)
(18563 missing values generated)
(18563 real changes made)
(122436 real changes made)
(18563 missing values generated)
(18563 real changes made)
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
(122436 real changes made)

.         
. label var totaldis_cost_nights "discounted NPV of hospitalisation costs"

. label var totaldis_cost_generalist "discounted NPV of generalist consultation
>  costs"

. label var totaldis_cost_specialist "discounted NPV of specialist consultation
>  costs"

. label var totaldis_cost_homecare_f "discounted NPV of homecare formal costs"

. label var totaldis_cost_drugs "discounted NPV of drug costs"

. label var totaldis_cost_nhome "discounted NPV of nhome costs"

. label var totalundis_cost_nights "undiscounted NPV of hospitalisation costs"

. label var totalundis_cost_specialist "undiscounted NPV of consultation costs"

. label var totalundis_cost_generalist "undiscounted NPV of consultation costs"

. label var totalundis_cost_homecare_f "undiscounted NPV of homecare formal cos
> ts"

. label var totalundis_cost_drugs "undiscounted NPV of drug costs"

. label var totalundis_cost_nhome "undiscounted NPV of nhome costs"

. 
. label var fyear "year cohort enters COMPAS"

. 
. capture drop temp_* 

  totalundis_cost_specialist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,898,792 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. capture drop t

. label data "simulated population from scenario $scenario"

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-11.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,813,312 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-28.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,856,045 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-3.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,191,168 bytes saved)

  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,427,280 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,231,448 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-33.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-12.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-25.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,422,650 bytes saved)

  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,134,624 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-18.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,918,408 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-38.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-19.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,786,250 bytes saved)

  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-4.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now byte
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now byte
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,613,900 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-31.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now int
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. compress
  year was long now int
  age was long now int
  byear was long now int
  hc_nights was long now int
  hc_specialist was long now int
  hc_generalist was long now byte
  cost_specialist was long now int
  cost_generalist was long now int
  cost_homecare_f was long now int
  hours_homecare_i was long now int
  hours_homecare_sp was long now int
  cost_drugs was long now byte
  wgt was long now int
  nyrs_diabe was float now byte
  agefirst_diabe was float now int
  nyrs_hibpe was float now byte
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,528,100 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-10.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (49,137,906 bytes saved)

  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-48.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,756,687 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-35.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,314,896 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-40.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,607,971 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-7.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now int
  agefirst_hibpe was float now int
  nyrs_hearte was float now byte
  agefirst_hearte was float now int
  nyrs_stroke was float now byte
  agefirst_stroke was float now int
  nyrs_cancre was float now byte
  agefirst_cancre was float now int
  nyrs_lunge was float now byte
  agefirst_lunge was float now int
  nyrs_mentae was float now byte
  agefirst_mentae was float now int
  agedead was float now int
  agefirst_smoke was float now int
  nyrs_smoke was float now byte
  agefirst_quit was float now byte
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,632,950 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-21.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,368,407 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-50.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_obese was float now byte
  agefirst_obese was float now int
  nyrs_disab was float now byte
  nyrs was float now byte
  nyrs_nondisab was float now byte
  nyrs_nhome was float now byte
  ever_nhome was float now byte
  agefirst_nhome was float now int
  nyrs_homecare was float now byte
  ever_homecare was float now byte
  agefirst_homecare was float now int
  nyrs_homecare_f was float now byte
  ever_homecare_f was float now byte
  agefirst_homecare_f was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,501,100 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-32.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (50,383,800 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-5.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
  nyrs_homecare_i was float now byte
  ever_homecare_i was float now byte
  agefirst_homecare_i was float now int
  nyrs_homecare_sp was float now byte
  ever_homecare_sp was float now byte
  agefirst_homecare_sp was float now int
  total_hc_nights was float now int
  total_hc_specialist was float now int
  total_hc_generalist was float now int
  nyrs_hc_drugs was float now byte
  total_hours_homecare_i was float now int
  total_hours_homecare_sp was float now int
  fyear was float now int
  totalundis_cost_specialist was float now int
  totalundis_cost_generalist was float now int
  totaldis_cost_drugs was float now byte
  totalundis_cost_drugs was float now byte
  (51,199,832 bytes saved)

. save output/$scenario/simpop-$rep.dta, replace
file output/reference/simpop-49.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
end of do-file
